"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.packeryEvents=exports["default"]=void 0;var _vue=_interopRequireDefault(require("vue")),_packery=_interopRequireDefault(require("packery"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}var ADD="itemAdded",CHANGE="itemChange",REMOVE="itemRemoved",LAYOUT="layout",SHIFTLAYOUT="shiftLayout",DRAGGIE="draggie",packeryPlugin=function(){},_default=packeryPlugin;exports["default"]=_default;var packeryEvents=new _vue["default"]({});exports.packeryEvents=packeryEvents;function CustomEvent(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent,packeryPlugin.install=function(a){a.directive("packery",{bind:function bind(b,c,d){b.packery=new _packery["default"](b,c.value);var e=!_typeof(b.packery.options.initLayout)||b.packery.options.initLayout,f=!_typeof(b.packery.options.initShiftLayout)||b.packery.options.initShiftLayout,g=!1,h=[],i=[],j=null,k=function(){e&&a.nextTick(function(){g?!g||h.length||i.length||f?g&&i.length?b.packery.remove(i):g&&h.length?b.packery.appended(h):(g&&f||h.length||i.length)&&b.packery.shiftLayout():b.packery.layout():(b.packery.reloadItems(),b.packery.layout()),h=[],i=[]})},l=function(a,b){return d.componentInstance?void d.componentInstance.$emit(a,b):void d.elm.dispatchEvent(new CustomEvent(a,b))};b.packery.on("layoutComplete",function(a,b){g=!0,l("layoutComplete",{event:a,laidOutItems:b})}),b.packery.on("dragItemPositioned",function(a,b){l("dragItemPositioned",{event:a,draggedItem:b})}),b.packery.on("fitComplete",function(a,b){l("fitComplete",{event:a,item:b})});var m=function(a){b.packery&&b.isSameNode(a.node)&&("layout"==a.type&&(e=!0),"shiftLayout"==a.type&&(e=!0,f=!0),"add"===a.type&&h.push(a.item),"remove"===a.type&&i.push(a.item),clearTimeout(j),j=setTimeout(function(){k()},1))};packeryEvents.$on(ADD,function(a){m(a)}),packeryEvents.$on(CHANGE,function(a){m(a)}),packeryEvents.$on(REMOVE,function(a){m(a)}),packeryEvents.$on(LAYOUT,function(a){a={node:a,type:"layout"},m(a)}),packeryEvents.$on(SHIFTLAYOUT,function(a){a={node:a,type:"shiftLayout"},m(a)}),packeryEvents.$on(DRAGGIE,function(a){b.isSameNode(a.node)&&b.packery.bindDraggabillyEvents(a.draggie)})},unbind:function unbind(a){var b=setInterval(function(){document.body.contains(a)||(a.packery.destroy(),a.packery=null,clearTimeout(b))},1e3)}}),a.directive("packeryItem",{inserted:function inserted(a){a.packeryNode=a.parentNode,packeryEvents.$emit(ADD,{node:a.packeryNode,item:a,type:"add"})},componentUpdated:function componentUpdated(a){packeryEvents.$emit(CHANGE,{node:a.packeryNode,item:a,type:"change"})},unbind:function unbind(a){packeryEvents.$emit(REMOVE,{node:a.packeryNode,item:a,type:"remove"})}})};
